
# Инструкция по настройке Apache для 1С и мобильной платформы

## Оглавление

1. [Список программного обеспечения](#список-программного-обеспечения)  
2. [Подготовка платформы 1С:Предприятие 8.3](#подготовка-платформы-1спредприятие-83)  
3. [Установка веб-сервера Apache 2.2](#установка-веб-сервера-apache-22)  
4. [Установка веб-сервера Apache 2.4](#установка-веб-сервера-apache-24)  
5. [Установка мобильной платформы на Android](#установка-мобильной-платформы-на-android)  
6. [Подготовка ПК](#подготовка-пк)  
7. [Создание мобильной конфигурации и публикация](#создание-мобильной-конфигурации-и-публикация)  
8. [Публикация основной базы данных](#публикация-основной-базы-данных)

---

## Список программного обеспечения

- 1С: Предприятие 8.3.2x (например, 8.3.23, 8.3.26)
- Web-server Apache 2.2 или 2.4
- APK-файл мобильной платформы 1С: Предприятие той же версии, что и на ПК

---

## Подготовка платформы 1С:Предприятие 8.3

1. Убедитесь, что платформа установлена:  
   `Панель управления > Программы и компоненты`  
2. Включите расширение веб-сервера:
   - Откройте «Программы и компоненты», выберите платформу 1С
   - Нажмите правой кнопкой → Изменить → Выбрать «Модули расширения веб-сервера»

---

## Установка веб-сервера Apache 2.2

1. Скачать установщик:  
   [httpd-2.2.25-win32-x86-no_ssl.msi](https://archive.apache.org/dist/httpd/binaries/win32/httpd-2.2.25-win32-x86-no_ssl.msi)

2. При установке укажите любые значения для имени сервера.  
   Выберите тип установки: **Typical**.

3. После установки сервер можно запускать через службы Windows.

---

## Установка веб-сервера Apache 2.4

1. Скачать архив:  
   [httpd-2.4.62-win64.zip](https://apache-windows.ru/files/httpd-2.4.62-240904-win64-VS17.zip)

2. Распаковать в `C:\Server\bin\Apache24`  
   Структура должна быть следующей:

   ```
   C:\
   └── Server
       ├── bin
       │   └── Apache24
       └── data
           └── htdocs
   ```

3. Отредактируйте `httpd.conf` в `c:\Server\bin\Apache24\conf\`:

   Замените:
   ```apache
     Меняем следующие строки
     Define SRVROOT "c:/Apache24"`   →
     Define SRVROOT "С:/Server/bin/Apache24"
      
      #ServerName www.example.com:80   →
      ServerName localhost
      
      
      DocumentRoot "${SRVROOT}/htdocs"   →
      DocumentRoot "С:/Server/data/htdocs"
      
      <Directory "${SRVROOT}/htdocs">    →
      <Directory "С:/Server/data/htdocs">
     
      DirectoryIndex index.html     →
      DirectoryIndex index.php index.html index.htm
      
      # AllowOverride controls what directives may be placed in .htaccess files.
      # It can be "All", "None", or any combination of the keywords:
      #   AllowOverride FileInfo AuthConfig Limit
      #
      AllowOverride None          →
      
      # AllowOverride controls what directives may be placed in .htaccess files.
      # It can be "All", "None", or any combination of the keywords:
      #   AllowOverride FileInfo AuthConfig Limit
      #
      AllowOverride All
      
      #LoadModule rewrite_module modules/mod_rewrite.so   →
      LoadModule rewrite_module modules/mod_rewrite.so
      Сохраняем и закрываем файл. Всё, настройка Apache завершена! 
      Откройте командную строку (это можно сделать нажав одновременно клавиши Win+X). Выберите там Терминал (администратор) и скопируйте туда:
      С:\Server\bin\Apache24\bin\httpd.exe -k install
      Если поступит запрос от файервола в отношение Apache, то нажмите Разрешить.
      Теперь вводим в командную строку:
      С:\Server\bin\Apache24\bin\httpd.exe -k start

   ```

4. Установка и запуск:
   ```cmd
   C:\Server\bin\Apache24\bin\httpd.exe -k install
   C:\Server\bin\Apache24\bin\httpd.exe -k start
   ```

5. Проверка: Откройте [http://localhost/](http://localhost/)

---

## Установка мобильной платформы на Android

1. Разрешите установку из неизвестных источников в настройках Android.
2. Передайте файл `1cem-arm-1.apk` на устройство.
3. Запустите установку, подтвердите разрешения.
4. После установки откройте мобильную платформу.

---

## Подготовка ПК

1. Отключите антивирус и брандмауэр:
   ```
   Панель управления > Брандмауэр > Отключение
   ```

---

## Создание мобильной конфигурации и публикация

1. Запустите 1С: Предприятие в режиме конфигуратора.
2. Создайте конфигурацию с параметрами:
   - Название: любое
   - Назначение: Мобильное устройство
   - Совместимость: Версия 8.3.3

3. Опубликуйте:  
   `Конфигурация > Мобильное приложение > Публиковать`

   **Важно:** путь и имя не должны содержать русских букв.

4. Перезапустите Apache и узнайте IP-адрес ПК:
   ```cmd
   ipconfig
   ```

5. На Android:
   - Откройте платформу → нажмите «+»
   - Введите адрес и путь публикации → нажмите «Загрузить»

---

## Публикация основной базы данных

1. В 1С:  
   `Администрирование > Публикация на веб-сервере`

2. Укажите имя и путь публикации.  
   Запуск сервера аналогично описанию выше.

---

> _Документация подготовлена для обеспечения связи 1С и мобильной платформы через Apache-сервер._
